  <div class="card">
    <div class="controls">
      <!-- Season row on its own -->
      <div class="field season-field">
        <label for="season">Season</label>
  <select id="season" [(ngModel)]="season" (change)="onSeasonChange()" class="select select--dark border">
          <option [ngValue]="null">— Select Season —</option>
          <option *ngFor="let y of seasons" [ngValue]="y">{{ y }}</option>
        </select>
      </div>

      <!-- Drivers + action on the next row -->
      <div class="field span-4" *ngIf="driverKeys.length">
        <label for="driver1">Driver 1</label>
  <select id="driver1" [(ngModel)]="driver1" class="select select--dark border">
          <option *ngFor="let code of driverKeys" [ngValue]="code">
            {{ driverMap[code].full_name }} ({{ code }})
          </option>
        </select>
      </div>

      <div class="field span-4" *ngIf="driverKeys.length">
        <label for="driver2">Driver 2</label>
  <select id="driver2" [(ngModel)]="driver2" class="select select--dark border">
          <option *ngFor="let code of driverKeys" [ngValue]="code">
            {{ driverMap[code].full_name }} ({{ code }})
          </option>
        </select>
      </div>

      <div class="field span-3 actions" *ngIf="driverKeys.length">
        <button class="btn--accent" (click)="onCompare()">Compare</button>
      </div>
    </div>

    <div class="legend" *ngIf="compared && driver1 && driver2">
      <span><span class="dot" [style.background]="color1"></span>{{ driverMap[driver1].full_name }}</span>
      <span><span class="dot" [style.background]="color2"></span>{{ driverMap[driver2].full_name }}</span>
    </div>

    <!-- Einzel-Charts nebeneinander -->
    <div class="charts-grid" *ngIf="compared">
      <div class="chart-card">
        <h3>Points</h3>
        <div class="chart-wrap"><canvas #pointsChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Wins</h3>
        <div class="chart-wrap"><canvas #winsChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Podiums</h3>
        <div class="chart-wrap"><canvas #podiumsChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Poles</h3>
        <div class="chart-wrap"><canvas #polesChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Avg Finish</h3>
        <div class="chart-wrap"><canvas #avgChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>DNFs</h3>
        <div class="chart-wrap"><canvas #dnfsChart></canvas></div>
      </div>
    </div>

    <div *ngIf="loading" class="status">Loading Season...</div>
    <div *ngIf="errorMsg" class="error-message">Error: {{ errorMsg }}</div>
  </div>

  <footer class="footer">© {{ currentYear }} GridStats</footer>

