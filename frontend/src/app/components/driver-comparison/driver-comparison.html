<section class="wrap">
  <div class="card">
    <div class="controls">
      <div class="field span-3">
        <label for="season">Saison</label>
  <select id="season" [(ngModel)]="season" (change)="onSeasonChange()" class="select select--dark border">
          <option *ngFor="let y of seasons" [ngValue]="y">{{ y }}</option>
        </select>
      </div>

      <div class="field span-4" *ngIf="driverKeys.length">
        <label for="driver1">Fahrer 1</label>
  <select id="driver1" [(ngModel)]="driver1" class="select select--dark border">
          <option *ngFor="let code of driverKeys" [ngValue]="code">
            {{ driverMap[code].full_name }} ({{ code }})
          </option>
        </select>
      </div>

      <div class="field span-4" *ngIf="driverKeys.length">
        <label for="driver2">Fahrer 2</label>
  <select id="driver2" [(ngModel)]="driver2" class="select select--dark border">
          <option *ngFor="let code of driverKeys" [ngValue]="code">
            {{ driverMap[code].full_name }} ({{ code }})
          </option>
        </select>
      </div>

      <div class="field span-3 actions" *ngIf="driverKeys.length">
        <button (click)="onCompare()">Vergleichen</button>
      </div>
    </div>

    <div class="legend" *ngIf="compared && driver1 && driver2">
      <span><span class="dot" [style.background]="color1"></span>{{ driverMap[driver1].full_name }}</span>
      <span><span class="dot" [style.background]="color2"></span>{{ driverMap[driver2].full_name }}</span>
    </div>

    <!-- Einzel-Charts nebeneinander -->
    <div class="charts-grid" *ngIf="compared">
      <div class="chart-card">
        <h3>Punkte</h3>
        <div class="chart-wrap"><canvas #pointsChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Siege</h3>
        <div class="chart-wrap"><canvas #winsChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Podien</h3>
        <div class="chart-wrap"><canvas #podiumsChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Poles</h3>
        <div class="chart-wrap"><canvas #polesChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>Ø Ziel</h3>
        <div class="chart-wrap"><canvas #avgChart></canvas></div>
      </div>
      <div class="chart-card">
        <h3>DNFs</h3>
        <div class="chart-wrap"><canvas #dnfsChart></canvas></div>
      </div>
    </div>

    <div *ngIf="loading" class="status">Lädt Season …</div>
    <div *ngIf="errorMsg" class="status error">Fehler: {{ errorMsg }}</div>
  </div>

  <footer class="footer">© {{ currentYear }} GridStats</footer>
</section>
